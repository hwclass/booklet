var Booklet=function(){var t=function(){var t=this;this.name=name,this.defaults="undefined"!=typeof options?options:{};this.SERVICES=[],this.TOPICS=[],this.createView=function(t,n){var i="undefined"!=typeof n?n:{};return new e(i)},this.createService=function(e,n){t.SERVICES.push({name:e,context:n})},this.getService=function(e){for(var n,i=0,r=t.SERVICES.length;r>i;i++)t.SERVICES[i].name===e&&(n=t.SERVICES[i].context);return n},this.publish=function(e,n){if(t.TOPICS[e]&&t.TOPICS[e].queue.length)for(var i=t.TOPICS[e].queue,r=0;r<i.length;r++)i[r](n||{})}},e=function(t){var e=this;this.defaults=t,this.MODULES=[],this.TOPICS=[],this.SERVICES=[],this.register=function(t,n){e.MODULES.push({name:t,fn:n(e),started:!1})},this.detach=function(t){var n=e.getModule(t,!0);try{e.MODULES.splice(n.index,1)}catch(i){console.log(i)}},this.start=function(t){var n=e.getModule(t);n.fn&&(n.fn.init(),n.started=!0)},this.startAll=function(){for(var t=0,n=e.MODULES.length;n>t;t++)e.MODULES[t].started||e.start(e.MODULES[t].name)},this.stop=function(t){var n=e.getModule(t);n=null},this.stopAll=function(){for(var t=0,n=e.MODULES.length;n>t;t++)e.MODULES[t].started||e.stop(e.MODULES[t].name)},this.subscribe=function(t,n){e.TOPICS[t]||(e.TOPICS[t]={queue:[]});var i=e.TOPICS[t].queue.push(n);return function(t){return{remove:function(){delete e.TOPICS[t]}}}(i)},this.getModule=function(t,n){for(var i,r,o,u=0,s=e.MODULES.length;s>u;u++)e.MODULES[u].name===t&&(i=e.MODULES[u],r=u);return n&&(i=o={selectedModule:i,index:r}),i},this.createService=function(t,n){e.SERVICES.push({name:t,context:n})},this.getService=function(t){for(var n,i=0,r=e.SERVICES.length;r>i;i++)e.SERVICES[i].name===t&&(n=e.SERVICES[i].context);return n},this.bindEvent=function(t,e,n){function i(t){var e=n.apply(this,arguments);return e===!1&&(t.stopPropagation(),t.preventDefault()),e}var r=t[0];r.addEventListener?r.addEventListener(e,i,!1):r.attachEvent?r.attachEvent("on"+e,n):r.attachEvent("on"+e,n)},this.getConfig=function(){return booklet.config},this.getUtility=function(){return booklet.utility}};return t}();
